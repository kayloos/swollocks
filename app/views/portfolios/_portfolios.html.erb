<table cellspacing="0" id="quotes_table" class="display">
  <thead>
    <tr>
      <th class="name">Name</th>
      <th>Latest</th>
      <th>Change</th>
      <th>%</th>
      <th>Buy</th>
      <th>Sell</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @quotes.each do |q|
      stock_yank = StockYank.find_by_name(q[:symbol])
      stock = Stock.find_by_stock_yank_id(StockYank.find(stock_yank.id)) %>
    <tr class="quotes">
      <td class="name"><%= stock_yank.pname %></td>
      <td><%= q[:last_trade_price_only] %></td>
      <td><%= q[:change].sub(/[\+]/, '') %></td>
      <td><%= q[:change_in_percent].sub(/[\+]/, '') %></td>
      <td><%= q[:bid] %></td>
      <td><%= q[:ask] %></td>
      <td class="add_rm">
        <div class="trade"></div>
          <%= link_to "+",
            { :controller => "stocks", :action => "buy",
              :stock => { 
                :portfolio_id => @portfolio.id,
                :stock_yank_id => stock_yank.id,
                :traded_at => q[:ask] } }, :class => "plus" %>
          <%= link_to "-",
            { :controller => "stocks", :action => "sell", :id => stock.id },
              :class => "minus" if @portfolio.stocks.include?(stock) %>
      </td>
    </tr>
<% end %>
  </tbody>
</table>
<div id="box_focus"></div>
<div style="clear:both;"></div>
